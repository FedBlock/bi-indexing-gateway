# ğŸ—ï¸ BI-Index Platform Architecture (Simplified)

## ğŸ“Š **ì‹¤ì œ êµ¬í˜„ëœ ì•„í‚¤í…ì²˜**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            Frontend / Client Applications                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚ HTTP REST API
                                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              BI-Index API Server                                   â”‚
â”‚                            (bi-index-api-server)                                   â”‚
â”‚                                 Port: 3001                                         â”‚
â”‚                                                                                     â”‚
â”‚    GET /api/blockchain-search?network=hardhat-local&purpose=ìˆ˜ë©´&indexed=true      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â–¼                   â–¼                   â–¼
                 indexed=true        indexed=false        /api/health
                                                              
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” 
â”‚        Index Search             â”‚ â”‚      Direct Search              â”‚
â”‚        (Fast ~1.6s)             â”‚ â”‚      (Slow ~6.8s)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                                   â”‚
                â–¼                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     BI-Indexing Gateway         â”‚ â”‚     BI-Indexing Gateway         â”‚
â”‚   (bi-indexing-gateway)         â”‚ â”‚   (bi-indexing-gateway)         â”‚
â”‚                                 â”‚ â”‚                                 â”‚
â”‚  â€¢ gRPC Client                  â”‚ â”‚  â€¢ Ethereum Client              â”‚
â”‚  â€¢ Index Operations             â”‚ â”‚  â€¢ Contract Interaction        â”‚
â”‚  â€¢ Data Processing              â”‚ â”‚  â€¢ Event Filtering              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                                   â”‚
                â–¼                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Index Manager            â”‚ â”‚      Blockchain Networks        â”‚
â”‚        (idxmngr-go)             â”‚ â”‚                                 â”‚
â”‚        Port: 50052              â”‚ â”‚  â€¢ Hardhat Local (:8545)        â”‚
â”‚                                 â”‚ â”‚  â€¢ Hardhat                      â”‚
â”‚  â€¢ Create Index                 â”‚ â”‚  â€¢ Monad (testnet)              â”‚
â”‚  â€¢ Insert Data                  â”‚ â”‚                                 â”‚
â”‚  â€¢ Search Data                  â”‚ â”‚  Contract:                      â”‚
â”‚  â€¢ Get Index Info               â”‚ â”‚  0x5FbDB2315678afecb367f032d93F â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Index Files (.bf)                                     â”‚
â”‚                        fileindex-go/data/hardhat-local/                           â”‚
â”‚                                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ purpose.bf  â”‚  â”‚ gender.bf   â”‚  â”‚   age.bf    â”‚  â”‚ region.bf   â”‚              â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚              â”‚
â”‚  â”‚ â€¢ ìˆ˜ë©´       â”‚  â”‚ â€¢ ë‚¨ì       â”‚  â”‚ â€¢ 20ëŒ€      â”‚  â”‚ â€¢ ì„œìš¸      â”‚              â”‚
â”‚  â”‚ â€¢ í˜ˆì••       â”‚  â”‚ â€¢ ì—¬ì       â”‚  â”‚ â€¢ 30ëŒ€      â”‚  â”‚ â€¢ ë¶€ì‚°      â”‚              â”‚
â”‚  â”‚ â€¢ ì‹¬ë°•ìˆ˜     â”‚  â”‚             â”‚  â”‚ â€¢ 40ëŒ€      â”‚  â”‚ â€¢ ëŒ€êµ¬      â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                                     â”‚
â”‚                          (Bloom Filter ê¸°ë°˜ ê³ ì† ê²€ìƒ‰)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ **í•µì‹¬ ì»´í¬ë„ŒíŠ¸**

### 1ï¸âƒ£ **BI-Index API Server**
- **Technology**: Node.js + Express.js
- **Port**: 3001
- **Main API**: `/api/blockchain-search`
- **Features**: í†µí•© ê²€ìƒ‰ API (ì¸ë±ìŠ¤ vs ì§ì ‘)

### 2ï¸âƒ£ **BI-Indexing Gateway**  
- **Location**: `bi-indexing-gateway/lib/indexing-client.js`
- **Role**: ì¸ë±ìŠ¤ì™€ ë¸”ë¡ì²´ì¸ì„ ì—°ê²°í•˜ëŠ” ê²Œì´íŠ¸ì›¨ì´
- **Features**: gRPC í´ë¼ì´ì–¸íŠ¸ + Ethereum í´ë¼ì´ì–¸íŠ¸

### 3ï¸âƒ£ **Index Manager**
- **Technology**: Go + gRPC
- **Port**: 50052  
- **Storage**: Bloom Filter (.bf files)
- **Operations**: Create, Insert, Search, Info

### 4ï¸âƒ£ **Blockchain Networks**
- **Hardhat Local**: localhost:8545
- **Contract**: AccessManagement (0x5FbDB...)
- **Events**: AccessRequestsSaved

## ğŸ“Š **ê²€ìƒ‰ ë°©ì‹ ë¹„êµ**

| ë°©ì‹ | ì†ë„ | ê²½ë¡œ | ì‚¬ìš© ì‹œì  |
|------|------|------|-----------|
| **Index Search** | ğŸš€ ë¹ ë¦„ (1.6ì´ˆ) | API â†’ Gateway â†’ Index Manager â†’ .bf files | ì¼ë°˜ ê²€ìƒ‰ |
| **Direct Search** | ğŸŒ ëŠë¦¼ (6.8ì´ˆ) | API â†’ Gateway â†’ Blockchain â†’ Contract Events | ê²€ì¦/ë””ë²„ê¹… |

## ğŸ¯ **API ì‚¬ìš©ë²•**

```bash
# ì¸ë±ìŠ¤ ê²€ìƒ‰ (ê¸°ë³¸ê°’, ë¹ ë¦„)
GET /api/blockchain-search?network=hardhat-local&purpose=ìˆ˜ë©´&indexed=true

# ë¸”ë¡ì²´ì¸ ì§ì ‘ (ëŠë¦¼, ê²€ì¦ìš©)
GET /api/blockchain-search?network=hardhat-local&purpose=ìˆ˜ë©´&indexed=false

# ë³µí•© í•„í„° (ì¸ë±ìŠ¤ë§Œ ì§€ì›)
GET /api/blockchain-search?network=hardhat-local&purpose=í˜ˆì••&gender=ë‚¨ì&indexed=true
```

## ğŸ“ˆ **ë°ì´í„° í”Œë¡œìš°**

### **Index Search (indexed=true)**
```
Client â†’ API Server â†’ BI-Indexing Gateway â†’ Index Manager â†’ .bf files â†’ Response
```

### **Direct Search (indexed=false)**  
```
Client â†’ API Server â†’ BI-Indexing Gateway â†’ Blockchain â†’ Contract â†’ Response
```

---

ğŸ·ï¸ **Version**: v1.0 Simple  
ğŸ“… **Date**: 2025-09-10  
âœ… **Status**: Production Ready
